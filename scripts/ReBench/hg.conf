# this run definition will be chosen if no parameters are given to rebench
default_experiment: all
default_data_file: 'hg.csv'

# a set of suites with different benchmarks and possibly different settings
benchmark_suites:
    Alone:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherMp new. bencher useHoneyGingerBench. bencher benchNoInstrumentation"
    AllocationRate:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherMp new. bencher useHoneyGingerBench; useAllocationRateProfiler. bencher benchExecution"
    MethodCounter:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherMp new. bencher useHoneyGingerBench; useMethodCounterProfiler. bencher benchExecution"
    NoActionAllMethods:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherMp new. bencher useHoneyGingerBench; useNoActionAllMethodsProfiler. bencher benchExecution"
    NoActionAllocatorMethods:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherMp new. bencher useHoneyGingerBench; useNoActionAllocatorMethodsProfiler. bencher benchExecution"
#########
#########
    AllocationRateRWI:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherRwi new. bencher useHoneyGingerBench; useAllocationRateProfiler. bencher benchExecution"
    MethodCounterRWI:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherRwi new. bencher useHoneyGingerBench; useMethodCounterProfiler. bencher benchExecution"
    NoActionAllMethodsRWI:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherRwi new. bencher useHoneyGingerBench; useNoActionAllMethodsProfiler. bencher benchExecution"
    NoActionAllocatorMethodsRWI:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherRwi new. bencher useHoneyGingerBench; useNoActionAllocatorMethodsProfiler. bencher benchExecution"
#######
#######
    AllocationRateNoSafe:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherMp new. bencher useHoneyGingerBench; useAllocationRateNoSafeProfiler. bencher benchExecution"
    MethodCounterNoSafe:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherMp new. bencher useHoneyGingerBench; useMethodCounterNoSafeProfiler. bencher benchExecution"
    NoActionAllMethodsNoSafe:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherMp new. bencher useHoneyGingerBench; useNoActionAllMethodsNoSafeProfiler. bencher benchExecution"
    NoActionAllocatorMethodsNoSafe:
        gauge_adapter: PlainSecondsLog
        command: |-
            eval "%(benchmark)s"
        input_sizes: [1]
        invocations: 30
        benchmarks:
            - "|bencher| bencher := BencherMp new. bencher useHoneyGingerBench; useNoActionAllocatorMethodsNoSafeProfiler. bencher benchExecution"
##
##
# a set of executables for the benchmark execution
executors:
    ExecutorHG:
        path: "."
        executable: "reBenchRunner.sh"
        args: "./baseimage/pharo-vm/Pharo.app/Contents/MacOS/Pharo --headless ./hg/hg.image --no-default-preferences"


# combining benchmark suites and executions
experiments:
    HG:
        suites:
          - Alone
          #
          - AllocationGraph
          - AllocationRate
          - MethodCounter
          - NoActionAllocatorMethods
          - NoActionAllMethods
          #
          - AllocationGraphRWI
          - AllocationRateRWI
          - MethodCounterRWI
          - NoActionAllMethodsRWI
          - NoActionAllocatorMethodsRWI
          #
          - AllocationRateNoSafe
          - MethodCounterNoSafe
          - NoActionAllMethodsNoSafe
          - NoActionAllocatorMethodsNoSafe
        executions:
          - ExecutorHG